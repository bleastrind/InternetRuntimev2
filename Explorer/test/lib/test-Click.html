
<script type="text/javascript"> 


var Lib_Tween =
{
	'None': function(pct)
	{
		return pct;
	},
	'Quad': function(pct)
	{
		return -(Math.pow((pct-1), 2) -1);
	}
}


function Show(Object)
{	
	var Tween = Lib_Tween['None'];
	var Time = 500;
	var EndOpacity = 1;
	var CallBack = function(){};	
	//Getters
		
	//Setters
	this.Tween = function(tn)
	{
		Tween = Lib_Tween[tn];
		return this;
	};	
	this.Time = function(tm)
	{
		Time = tm;
		return this;
	};
	this.EndOpacity = function(eo)
	{	
		EndOpacity = eo;
		return this;
	};	
	this.CallBack = function(cb)
	{
		CallBack = cb;
		return this;
	};
	this.Excute = function()
	{
		Object.style.display = 'block';
		var StartOpacity = parseFloat(Object.style.opacity);
		var StartTime = new Date().getTime();
		function Run()
		{
			var NewTime = new Date().getTime();
			var d = Tween((NewTime - StartTime) / parseFloat(Time));
			
			//alert(Object.style.opacity);
			if (Time >= (NewTime - StartTime))
			{
				Object.style.opacity = StartOpacity + d * (EndOpacity - StartOpacity);				
				setTimeout(Run, 10);
			}
			else
			{
				Object.style.opacity = EndOpacity;
				CallBack(this);
			}
		}
		Run();
		return this;
	};
	return this;
}



function Hide(Object)
{	
	var Tween = Lib_Tween['None'];
	var Time = 500;
	var EndOpacity = 0;
	var CallBack = function(){};	
	//Getters
		
	//Setters
	this.Tween = function(tn)
	{
		Tween = Lib_Tween[tn];
		return this;
	};	
	this.Time = function(tm)
	{
		Time = tm;
		return this;
	};
	this.EndOpacity = function(eo)
	{	
		EndOpacity = eo;
		return this;
	};	
	this.CallBack = function(cb)
	{
		CallBack = cb;
		return this;
	};
	this.Excute = function()
	{
		Object.style.display = 'block';
		var StartOpacity = parseFloat(Object.style.opacity);
		var StartTime = new Date().getTime();
		function Run()
		{
			var NewTime = new Date().getTime();
			var d = Tween((NewTime - StartTime) / parseFloat(Time));
			
			//alert(Object.style.opacity);
			if (Time >= (NewTime - StartTime))
			{
				Object.style.opacity = StartOpacity + d * (EndOpacity - StartOpacity);				
				setTimeout(Run, 10);
			}
			else
			{
				Object.style.opacity = EndOpacity;				
				CallBack(this);
			}
		}
		Run();
		return this;
	};
	return this;
}




function Click(Object)
{		
	var DoFunc = function(){};
	var UnBreaked = true;
	
	var REST = 1, RUN = 2;
	var AnimeState = REST; 
	//Getters
		
	//Setters
	this.DoFunc = function(dof)
	{
		DoFunc = dof;
		return this;
	};	
	this.UnBreaked = function(ub)
	{
		UnBreaked = ub;
		return this;
	}
	function DoFuncDone()
	{				
		AnimeState = REST;			
	}
	this.Excute = function()
	{
		Object.onclick = function()
		{			
			if (AnimeState == REST)
			{
				AnimeState = RUN;
				DoFunc(DoFuncDone);
			}
		}		
		return this;
	};
	return this;
}


function test1()
{
	document.getElementById('text').value = '';
	var Box = document.getElementById('box');
	var aClick = new 
	Click(Box)
	.DoFunc(function(done){
		var aShow = Show(Box).Time(200).CallBack(function(){
			var aHide = Hide(Box).Time(200).CallBack(done).Excute();
		}).Excute();
	})	
	.Excute();
	

}
</script>
<button onclick = "test1()" >Test!!</button>
<div id = 'box'; style="opacity: 1;border: 1px solid #666666; height:100px; width:200px; left:0px; top:200px; position: absolute" >
</div>
<textarea id = 'text'></textarea>